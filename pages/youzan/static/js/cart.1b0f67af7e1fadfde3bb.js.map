{"version":3,"sources":["webpack:///static/js/cart.1b0f67af7e1fadfde3bb.js","webpack:///./src/modules/js/api.js?4c58***","webpack:///./src/pages/cart/cart.js"],"names":["webpackJsonp","1","module","__webpack_exports__","__webpack_require__","rootUrl","ownUrl","url","recommendList","bannerList","navList","hotList","categoryList","goodsList","detail","deal","cartList","addressList","59","exports","60","61","94","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","n","__WEBPACK_IMPORTED_MODULE_1__cart_base_css__","__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__","__WEBPACK_IMPORTED_MODULE_3__cart_css__","__WEBPACK_IMPORTED_MODULE_4_vue__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_js_api_js__","el","data","allChecked","editStatus","totalPrice","selectNum","editSelectNum","dialogShow","dialogText","deleteType","created","this","getCartList","watch","newVal","oldVal","checkShopAndAll","forEach","shop","goods","waitDelete","methods","_this","a","get","then","res","list","e","checked","editText","checkedMemory","editLocked","g","totalPriceAndNum","selectShop","checkEditSelectNum","selectAll","selectGoods","_this2","shopNum","shopIndex","goodsNum","goodsIndex","length","editShop","i","JSON","parse","price","num","number","goodsMinus","goodsPlus","goodsNumInput","showDeleteDialog","showBatchDeleteDialog","deleteGoods","_this3","splice","deleteChecked"],"mappings":"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","file":"static/js/cart.1b0f67af7e1fadfde3bb.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 1:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar rootUrl = 'http://rapapi.org/mockjsdata/24170';\nvar ownUrl = 'http://rapapi.org/mockjsdata/24913';\nvar url = {\n  recommendList: ownUrl + '/index/recommendList',\n  bannerList: ownUrl + '/index/bannerList',\n  navList: rootUrl + '/category/topList',\n  hotList: rootUrl + '/category/rank',\n  categoryList: rootUrl + '/category/subList',\n  goodsList: rootUrl + '/search/list',\n  detail: rootUrl + '/goods/details',\n  deal: rootUrl + '/goods/deal',\n  cartList: rootUrl + '/cart/list',\n  addressList: rootUrl + '/address/list'\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_base_css__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_trade_css__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cart_css__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_js_api_js__ = __webpack_require__(1);\n\n// import 'css/common.css'\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_4_vue__[\"default\"]({\n  el: '#app',\n  data: {\n    cartList: null,\n    allChecked: true,\n    editStatus: false,\n    totalPrice: 0,\n    selectNum: 0,\n    editSelectNum: 0,\n    dialogShow: false,\n    dialogText: '确定要删除该商品吗?',\n    deleteType: 'single'\n  },\n  created: function created() {\n    this.getCartList();\n  },\n\n  watch: {\n    editStatus: function editStatus(newVal, oldVal) {\n      if (newVal) {\n        this.allChecked = false;\n      } else {\n        this.checkShopAndAll();\n      }\n    },\n    dialogShow: function dialogShow(newVal, oldVal) {\n      if (!newVal) {\n        this.cartList.forEach(function (shop) {\n          shop.goodsList.forEach(function (goods) {\n            goods.waitDelete = false;\n          });\n        });\n      } else {}\n    }\n  },\n  methods: {\n    getCartList: function getCartList() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_5_axios___default.a.get(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartList).then(function (res) {\n        var list = res.data.cartList;\n        list.forEach(function (e) {\n          e.checked = true;\n          e.editText = '编辑';\n          e.editStatus = false;\n          e.checkedMemory = null;\n          e.editLocked = false;\n          e.goodsList.forEach(function (g) {\n            g.checked = true;\n            g.waitDelete = false;\n          });\n        });\n        _this.cartList = list;\n        _this.totalPriceAndNum();\n      });\n    },\n    selectShop: function selectShop(shop) {\n      if (shop.checked) {\n        shop.checked = false;\n        shop.goodsList.forEach(function (e) {\n          e.checked = false;\n        });\n      } else {\n        shop.checked = true;\n        shop.goodsList.forEach(function (e) {\n          e.checked = true;\n        });\n      }\n      this.checkShopAndAll();\n      this.checkEditSelectNum();\n      this.totalPriceAndNum();\n    },\n    selectAll: function selectAll() {\n      if (this.editStatus) {\n        if (this.allChecked) {\n          this.cartList.forEach(function (e) {\n            if (e.editStatus) {\n              e.checked = false;\n              e.goodsList.forEach(function (goods) {\n                goods.checked = false;\n              });\n            }\n          });\n          this.allChecked = false;\n        } else {\n          this.cartList.forEach(function (e) {\n            if (e.editStatus) {\n              e.checked = true;\n              e.goodsList.forEach(function (goods) {\n                goods.checked = true;\n              });\n            }\n          });\n          this.allChecked = true;\n        }\n      } else {\n        if (this.allChecked) {\n          this.cartList.forEach(function (shop) {\n            shop.checked = false;\n            shop.goodsList.forEach(function (goods) {\n              goods.checked = false;\n            });\n          });\n          this.allChecked = false;\n        } else {\n          this.cartList.forEach(function (shop) {\n            shop.checked = true;\n            shop.goodsList.forEach(function (goods) {\n              goods.checked = true;\n            });\n          });\n          this.allChecked = true;\n        }\n        this.totalPriceAndNum();\n      }\n      this.checkEditSelectNum();\n    },\n    selectGoods: function selectGoods(goods, shop) {\n      if (goods.checked) {\n        goods.checked = false;\n        if (this.allChecked) this.allChecked = false;\n        if (shop.checked) shop.checked = false;\n      } else {\n        goods.checked = true;\n        this.checkShopAndAll();\n      }\n      this.checkEditSelectNum();\n      this.totalPriceAndNum();\n    },\n    checkShopAndAll: function checkShopAndAll() {\n      var _this2 = this;\n\n      var shopNum = 0;\n      this.cartList.forEach(function (shop, shopIndex) {\n        var goodsNum = 0;\n        shop.goodsList.forEach(function (goods, goodsIndex) {\n          if (goods.checked) goodsNum += 1;\n          if (goodsIndex === shop.goodsList.length - 1) {\n            if (goodsNum === shop.goodsList.length) {\n              shop.checked = true;\n              shopNum += 1;\n            } else {\n              shop.checked = false;\n            }\n          }\n        });\n        if (shopIndex === _this2.cartList.length - 1) {\n          if (shopNum === _this2.cartList.length) {\n            _this2.allChecked = true;\n          } else {\n            _this2.allChecked = false;\n          }\n        }\n      });\n    },\n    editShop: function editShop(shop) {\n      if (shop.editStatus) {\n        this.editStatus = false;\n        this.cartList.forEach(function (e) {\n          e.editLocked = false;\n        });\n        shop.editText = '编辑';\n        if (shop.checkedMemory) {\n          shop.checked = shop.checkedMemory.checked;\n          shop.goodsList.forEach(function (e, i) {\n            e.checked = shop.checkedMemory.goodsList[i].checked;\n          });\n        }\n        shop.editStatus = false;\n        this.totalPriceAndNum();\n      } else {\n        this.editStatus = true;\n        this.cartList.forEach(function (e) {\n          e.editLocked = true;\n        });\n        shop.editLocked = false;\n        shop.editText = '完成';\n        shop.checkedMemory = JSON.parse(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(shop));\n        shop.checked = false;\n        shop.goodsList.forEach(function (e) {\n          e.checked = false;\n        });\n        shop.editStatus = true;\n      }\n    },\n    totalPriceAndNum: function totalPriceAndNum() {\n      var price = 0;\n      var num = 0;\n      this.cartList.forEach(function (e) {\n        e.goodsList.forEach(function (goods) {\n          if (goods.checked) {\n            price += goods.price * goods.number;\n            num += 1;\n          }\n        });\n      });\n      this.totalPrice = price;\n      this.selectNum = num;\n    },\n    goodsMinus: function goodsMinus(goods) {\n      if (goods.number < 2) return;\n      goods.number -= 1;\n    },\n    goodsPlus: function goodsPlus(goods) {\n      if (goods.number > 8) return;\n      goods.number += 1;\n    },\n    goodsNumInput: function goodsNumInput(goods) {\n      if (goods.number < 1) goods.number = 1;\n      if (goods.number > 9) goods.number = 9;\n    },\n    checkEditSelectNum: function checkEditSelectNum() {\n      if (!this.editStatus) return;\n      var num = 0;\n      this.cartList.forEach(function (shop) {\n        if (shop.editStatus) {\n          shop.goodsList.forEach(function (goods) {\n            if (goods.checked) num += 1;\n          });\n        }\n      });\n      this.editSelectNum = num;\n    },\n    showDeleteDialog: function showDeleteDialog(goods) {\n      this.dialogText = '确定要删除该商品吗?';\n      this.deleteType = 'single';\n      this.dialogShow = true;\n      goods.waitDelete = true;\n    },\n    showBatchDeleteDialog: function showBatchDeleteDialog() {\n      var num = 0;\n      this.cartList.forEach(function (shop) {\n        if (shop.editStatus) {\n          shop.goodsList.forEach(function (goods) {\n            if (goods.checked) num += 1;\n          });\n        }\n      });\n      this.dialogText = '\\u786E\\u5B9A\\u5C06\\u6240\\u9009' + num + '\\u4E2A\\u5546\\u54C1\\u5220\\u9664?';\n      this.deleteType = 'multiple';\n      this.dialogShow = true;\n    },\n    deleteGoods: function deleteGoods() {\n      var _this3 = this;\n\n      switch (this.deleteType) {\n        case 'single':\n          {\n            this.cartList.forEach(function (shop, shopIndex) {\n              shop.goodsList.forEach(function (goods, goodsIndex) {\n                if (goods.waitDelete) shop.goodsList.splice(goodsIndex, 1);\n              });\n            });\n          }\n        case 'multiple':\n          {\n            this.cartList.forEach(function (shop, shopIndex) {\n              if (shop.editStatus) {\n                var deleteChecked = function deleteChecked() {\n                  shop.goodsList.forEach(function (goods, goodsIndex) {\n                    var length = shop.goodsList.length - 1;\n                    if (goods.checked) shop.goodsList.splice(goodsIndex, 1);\n                    if (goodsIndex !== length) deleteChecked();\n                  });\n                };\n                deleteChecked();\n              }\n            });\n            break;\n          }\n      }\n      this.cartList.forEach(function (shop, shopIndex) {\n        if (shop.goodsList.length === 0) {\n          _this3.cartList.splice(shopIndex, 1);\n          _this3.cartList.forEach(function (e) {\n            e.editLocked = false;\n          });\n          _this3.editStatus = false;\n          _this3.totalPriceAndNum();\n        };\n      });\n      this.dialogShow = false;\n    }\n  }\n\n});\n\n/***/ })\n\n},[94]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.1b0f67af7e1fadfde3bb.js","const rootUrl = 'http://rapapi.org/mockjsdata/24170';\nconst ownUrl = 'http://rapapi.org/mockjsdata/24913';\nconst url = {\n  recommendList: ownUrl + '/index/recommendList',\n  bannerList: ownUrl + '/index/bannerList',\n  navList: rootUrl + '/category/topList',\n  hotList: rootUrl + '/category/rank',\n  categoryList: rootUrl + '/category/subList',\n  goodsList: rootUrl + '/search/list',\n  detail: rootUrl + '/goods/details',\n  deal: rootUrl + '/goods/deal',\n  cartList: rootUrl + '/cart/list',\n  addressList: rootUrl + '/address/list',\n};\nexport default url;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","// import 'css/common.css'\nimport './cart_base.css';\nimport './cart_trade.css';\nimport './cart.css';\n\nimport Vue from 'vue';\nimport axios from 'axios';\nimport url from 'js/api.js';\n\nnew Vue({\n  el: '#app',\n  data: {\n    cartList: null,\n    allChecked: true,\n    editStatus: false,\n    totalPrice: 0,\n    selectNum: 0,\n    editSelectNum: 0,\n    dialogShow: false,\n    dialogText: '确定要删除该商品吗?',\n    deleteType: 'single',\n  },\n  created() {\n    this.getCartList();\n  },\n  watch: {\n    editStatus(newVal, oldVal) {\n      if(newVal) {\n        this.allChecked = false;\n      } else {\n        this.checkShopAndAll();\n      }\n    },\n    dialogShow(newVal, oldVal) {\n      if(!newVal) {\n        this.cartList.forEach(shop => {\n          shop.goodsList.forEach(goods => {\n            goods.waitDelete = false;\n          })\n        })\n      } else {\n\n      }\n    },\n  },\n  methods: {\n    getCartList() {\n      axios.get(url.cartList).then(res => {\n        let list = res.data.cartList;\n        list.forEach(e => {\n          e.checked = true;\n          e.editText = '编辑';\n          e.editStatus = false;\n          e.checkedMemory = null;\n          e.editLocked = false;\n          e.goodsList.forEach(g => {\n            g.checked = true;\n            g.waitDelete = false;\n          })\n        });\n        this.cartList = list;\n        this.totalPriceAndNum();\n      });\n    },\n    selectShop(shop) {\n      if(shop.checked) {\n        shop.checked = false;\n        shop.goodsList.forEach(e => {\n          e.checked = false;\n        })\n      } else {\n        shop.checked = true;\n        shop.goodsList.forEach(e => {\n          e.checked = true;\n        });\n      }\n      this.checkShopAndAll();\n      this.checkEditSelectNum();\n      this.totalPriceAndNum();\n    },\n    selectAll() {\n      if(this.editStatus) {\n        if(this.allChecked) {\n          this.cartList.forEach(e => {\n            if(e.editStatus) {\n              e.checked = false;\n              e.goodsList.forEach(goods => {\n                goods.checked = false;\n              })\n            }\n          })\n          this.allChecked = false;\n        } else {\n          this.cartList.forEach(e => {\n            if(e.editStatus) {\n              e.checked = true;\n              e.goodsList.forEach(goods => {\n                goods.checked = true;\n              })\n            }\n          })\n          this.allChecked = true;\n        }\n      } else {\n        if(this.allChecked){\n          this.cartList.forEach(shop => {\n            shop.checked = false;\n            shop.goodsList.forEach(goods => {\n              goods.checked = false;\n            })\n          })\n          this.allChecked = false;\n        } else {\n          this.cartList.forEach(shop => {\n            shop.checked = true;\n            shop.goodsList.forEach(goods => {\n              goods.checked = true;\n            })\n          })\n          this.allChecked = true;\n        }\n        this.totalPriceAndNum();   \n      }\n      this.checkEditSelectNum();\n    },\n    selectGoods(goods, shop) {\n      if(goods.checked) {\n        goods.checked = false;\n        if(this.allChecked) this.allChecked = false;\n        if(shop.checked) shop.checked = false;\n      } else {\n        goods.checked = true;\n        this.checkShopAndAll();\n      }\n      this.checkEditSelectNum();\n      this.totalPriceAndNum();\n    },\n    checkShopAndAll() {\n      let shopNum = 0;\n      this.cartList.forEach((shop,shopIndex) => {\n        let goodsNum = 0;\n        shop.goodsList.forEach((goods,goodsIndex) => {\n          if(goods.checked) goodsNum += 1;\n          if(goodsIndex === shop.goodsList.length - 1){\n            if(goodsNum === shop.goodsList.length){\n              shop.checked = true;\n              shopNum += 1;\n            } else {\n              shop.checked = false;\n            }\n          }\n        })\n        if(shopIndex === this.cartList.length - 1){\n          if(shopNum === this.cartList.length){\n            this.allChecked = true;\n          } else {\n            this.allChecked = false;\n          }\n        }\n      })\n    },\n    editShop(shop) {\n      if(shop.editStatus) {\n        this.editStatus = false;\n        this.cartList.forEach(e => {\n          e.editLocked = false;\n        });\n        shop.editText = '编辑';\n        if(shop.checkedMemory) {\n          shop.checked = shop.checkedMemory.checked;\n          shop.goodsList.forEach((e, i) => {\n            e.checked = shop.checkedMemory.goodsList[i].checked;\n          })\n        }\n        shop.editStatus = false;\n        this.totalPriceAndNum();\n      } else {\n        this.editStatus = true;\n        this.cartList.forEach(e => {\n          e.editLocked = true;\n        });\n        shop.editLocked = false;\n        shop.editText = '完成';\n        shop.checkedMemory = JSON.parse(JSON.stringify(shop));\n        shop.checked = false;\n        shop.goodsList.forEach(e => {\n          e.checked = false;\n        })\n        shop.editStatus = true;\n      }\n    },\n    totalPriceAndNum() {\n      let price = 0;\n      let num = 0;\n      this.cartList.forEach(e => {\n        e.goodsList.forEach(goods => {\n          if(goods.checked){\n            price += goods.price * goods.number;\n            num += 1;\n          }\n        })\n      })\n      this.totalPrice = price;\n      this.selectNum = num;\n    },\n    goodsMinus(goods) {\n      if(goods.number<2) return;\n      goods.number -= 1;\n    },\n    goodsPlus(goods) {\n      if(goods.number > 8) return;\n      goods.number += 1;\n    },\n    goodsNumInput(goods) {\n      if(goods.number < 1) goods.number = 1;\n      if(goods.number > 9) goods.number = 9;\n    },\n    checkEditSelectNum() {\n      if(!this.editStatus) return;\n      let num = 0;\n      this.cartList.forEach(shop => {\n        if(shop.editStatus){\n          shop.goodsList.forEach(goods => {\n            if(goods.checked) num += 1;\n          });\n        }\n      })\n      this.editSelectNum = num;\n    },\n    showDeleteDialog(goods) {\n      this.dialogText = '确定要删除该商品吗?';\n      this.deleteType = 'single';\n      this.dialogShow = true;\n      goods.waitDelete = true;\n    },\n    showBatchDeleteDialog() {\n      let num = 0;\n      this.cartList.forEach(shop => {\n        if(shop.editStatus) {\n          shop.goodsList.forEach(goods => {\n            if(goods.checked) num += 1;\n          })\n        }\n      })\n      this.dialogText = `确定将所选${num}个商品删除?`;\n      this.deleteType = 'multiple';\n      this.dialogShow = true;\n    },\n    deleteGoods() {\n      switch(this.deleteType) {\n        case 'single': {\n          this.cartList.forEach((shop,shopIndex) => {\n            shop.goodsList.forEach((goods,goodsIndex) => {\n              if(goods.waitDelete) shop.goodsList.splice(goodsIndex, 1);\n            });\n          })\n        }\n        case 'multiple': {\n          this.cartList.forEach((shop,shopIndex) => {\n            if(shop.editStatus) {\n              const deleteChecked = () => {\n                shop.goodsList.forEach((goods,goodsIndex) => {\n                  let length = shop.goodsList.length-1;\n                  if(goods.checked) shop.goodsList.splice(goodsIndex, 1);\n                  if(goodsIndex !== length) deleteChecked();\n                })\n              }\n              deleteChecked();\n            }\n          })\n          break;\n        }\n      }\n      this.cartList.forEach((shop,shopIndex) => {\n        if(shop.goodsList.length === 0) {\n          this.cartList.splice(shopIndex, 1);\n          this.cartList.forEach(e => {\n            e.editLocked = false;\n          });\n          this.editStatus = false;\n          this.totalPriceAndNum();\n        };\n      })\n      this.dialogShow = false;\n    },\n  },\n\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}